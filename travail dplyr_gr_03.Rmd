---
title: "Travail DPLYR"
author: "vincent obertelli"
date: "12/6/2020"
output:
  pdf_document: default
  html_document: default
  word_document: default
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

Nous allons voir dans ce document comment utiliser le package dplyr. Ce package nous sera utile pour traiter ou manipuler des bases de données. Ce package nous permettra de modifier des data.frame ou tibble (tableaux de données).

Pour commencer nous allons installer le package. Pour ce faire on peut soit installer tout tidyverse, soit juste dplyr.

install.packages("tidyverse")

install.packages("dplyr")

Pour notre exemple, nous allons utiliser une base de donnée qui contient les informations sur les vols des trois aéroports de New York en 2013 (après avoir installer le package, nycflights13 ) :

```{r}

library(nycflights13)
## Chargement des trois tables du jeu de données (se sont des tibbles)
data(flights)
data(airports)
data(airlines)
```
Maintenant, nos 3 tibbles sont dans l'environnement de RStudio. Maintenant nous pouvons voir les fonctions proposées par ce package :



**-La fonction Slice**. Elle permet de séléctionner des lignes du tableau grâce à leur position.

```{r}
library(dplyr)
slice(flights, 14)
```

On peut aussi séléctionner la première ligne :

```{r}
library(dplyr)
slice_head(airlines)
```

On peut séléctionner des lignes akéatoires :
  
```{r}
library(dplyr)
slice_sample(airports)
```

On peut aussi séléctionner un nombre de ligne compris entre deux valeurs :

```{r}
library(dplyr)
slice(airports, 100:105)
```

Il est possible d'utiliser la fonction slice pour d'autre but, mais vous verrez cela par vous même en pratiquant. Pour l'instant, grâce à ces connaissances, il est possible de travailler avec slice.



**-La fonction filter**. Elle permet de séléctionner des lignes qui suivent une condition particulière. 
Par exemple filtrer les vols sur le mois et plus précisément sur le mois de décembre.

```{r}
library(dplyr)
filter(flights, month == 12)
```


**-La fonction select**. Elle permet de séléctionner les colonnes du tableau.
Par exemple si l'on veut la colonne année du tableau flights, on fait :

```{r}
library(dplyr)
select(flights, year)
```


**-La fonction mutate**. Elle permet de créer de nouvelles colonnes.
Par exemple, la table airports contient l’altitude de l’aéroport en pieds. Si on veut créer une nouvelle variable alt_m avec l’altitude en mètres, on peut faire :

```{r}
library(dplyr)
airports <- mutate(airports, alt_m = alt / 3.2808)
select(airports, name, alt, alt_m)
```


Maintenant, il vous est possible de travailler avec le package dplyr, nous venont de voir les fonctions de base. Il reste cependant beaucoup à voir sur ce package, rien ne vous empêche de chercher plus par vous-même.





