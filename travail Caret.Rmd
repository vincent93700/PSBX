---
title: "travail CARET"
author: "vincent obertelli"
date: "12/6/2020"
output:
  pdf_document: default
  html_document: default
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

Nous allons désormais apprendre à utiliser le package **Caret**. Cette librairie permet de faire de l'analyse prédictive. 

Tout comme les autres librairies abordées plus tôt, il faut d'abord installer le package pour pouvoir l'utiliser :

install.packages("caret")

Pour mieux comprendre cette librairie, nous allons utiliser une exemple :

```{r}

library(caret)

# Import  du dataset
orange <- read.csv('https://raw.githubusercontent.com/selva86/datasets/master/orange_juice_withmissing.csv')

# Structure de la dataframe
str(orange)

# afficher du début à la 6ème ligne et les 10 columnes
head(orange[, 1:10])

```


Nous allons désormais commencer l'algorythme d'analyse prédictif. On va prendre un échantillon de données, puis le diviser en deux parties : entrainement (environ 80% des données) et test (20% des données).

```{r}
library(caret)
# Création du "seed", référence de l'algorythme aléatoire
set.seed(100)

# Etape 1: préparation des données d'entrainement
trainRowNumbers <- createDataPartition(orange$Purchase, p=0.8, list=FALSE)

# Etape 2: Création du dataset d'entrainement
trainData <- orange[trainRowNumbers,]

# Etape 3: Création du dataset test
testData <- orange[-trainRowNumbers,]

# Stocker X et Y pour les utiliser plus tard.
x = trainData[, 2:18]
y = trainData$Purchase
```


Maintenant que nous avons créer nos bases on va tester si l'algorythme est bon pour prévoir. Nous allons entrainer notre programme sur les 80% et tenter de prévoir sur les 20% restants. Pour cela nous allons créer une liste de prédiction qui va essayer de deviner correctement les 20% restant. Une fois que cela est fait on peut calculer l'accuracy (ou précision).Plus l'accuracy est élévée, plus le système de prédiction est élevé.

Pour cette partie, les codes que j'ai essayé non pas fonctionné, je vais donc chercher comment réussir cette partie pendant la semaine et pendant les cours de R.






